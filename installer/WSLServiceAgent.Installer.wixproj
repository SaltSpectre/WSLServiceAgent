<Project Sdk="WixToolset.Sdk/4.0.5">
  <PropertyGroup>
    <OutputName>WSLServiceAgent-$(Platform)</OutputName>
    <InstallerPlatform Condition="'$(Platform)' == 'arm64'">arm64</InstallerPlatform>
    <InstallerPlatform Condition="'$(Platform)' == 'x64'">x64</InstallerPlatform>
    <SuppressIces>ICE38;ICE64</SuppressIces>
    <Version Condition="'$(Version)' == ''">1.0.0.0</Version>
    <DefineConstants>Version=$(Version)</DefineConstants>
  </PropertyGroup>

  <PropertyGroup>
    <HarvestPath Condition="'$(Platform)' == 'arm64'">arm64</HarvestPath>
    <HarvestPath Condition="'$(Platform)' == 'x64'">x64</HarvestPath>
    <PublishDir>..\publish\$(HarvestPath)</PublishDir>
    <HarvestDirectorySuppressRootDirectory>true</HarvestDirectorySuppressRootDirectory>
  </PropertyGroup>

  <ItemGroup>
    <HarvestDirectory Include="$(PublishDir)">
      <ComponentGroupName>PublishedFiles</ComponentGroupName>
      <DirectoryRefId>INSTALLFOLDER</DirectoryRefId>
      <SuppressRootDirectory>true</SuppressRootDirectory>
    </HarvestDirectory>
    <BindPath Include="$(PublishDir)" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="WixToolset.Heat" Version="4.0.5" />
    <PackageReference Include="WixToolset.Util.wixext" Version="4.0.5" />
    <PackageReference Include="WixToolset.UI.wixext" Version="4.0.5" />
  </ItemGroup>
</Project>
